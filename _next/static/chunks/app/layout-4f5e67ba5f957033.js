(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{232:function(e,t,a){Promise.resolve().then(a.bind(a,7612)),Promise.resolve().then(a.t.bind(a,4845,23)),Promise.resolve().then(a.t.bind(a,7732,23))},7612:function(e,t,a){"use strict";a.r(t),a.d(t,{Providers:function(){return f}});var n=a(984),r=a(7252),o=a(2629),s=a(8739),i=a(208),l=a(6176),u=a(1434);let c=a(9498).Z.create({baseURL:"http://localhost:3001/api/v1",headers:{"Content-Type":"application/json"}});c.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{var t,a,n;return(null===(t=e.response)||void 0===t?void 0:t.status)!==401||(null===(n=e.config)||void 0===n?void 0:null===(a=n.url)||void 0===a?void 0:a.startsWith("/auth/"))||(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="#"),Promise.reject(e)});let d={login:async e=>{try{return(await c.post("/auth/login",e)).data}catch(e){var t,a,n,r;throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||(null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)||"Invalid email or password")}},logout:async()=>{}},g={async getUsers(e){let t=new URLSearchParams;(null==e?void 0:e.role)&&t.append("role",e.role),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.sportsCenterId)&&t.append("sportsCenterId",e.sportsCenterId),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());let a=t.toString(),{data:n}=await c.get("/users".concat(a?"?".concat(a):""));return{users:n.data,total:n.meta.total,totalPages:n.meta.totalPages}},async getCurrentUser(){let{data:e}=await c.get("/users/me");return e},async getUserById(e){let{data:t}=await c.get("/users/".concat(e));return t},async createUser(e){let{data:t}=await c.post("/users",e);return t},async updateUser(e,t){let{data:a}=await c.patch("/users/".concat(e),t);return a},async deleteUser(e){await c.delete("/users/".concat(e))}},h=(0,u.Ue)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!0,initialize:()=>{try{let t=localStorage.getItem("auth_token"),a=localStorage.getItem("auth_user");if(t&&a){let n=JSON.parse(a);e({user:n,token:t,isAuthenticated:!0,isLoading:!1}),g.getCurrentUser().then(t=>{let a={id:t.id,email:t.email,firstName:t.firstName,lastName:t.lastName,role:t.role,sportsCenterId:t.sportsCenterId,language:t.language,avatar:t.avatar};localStorage.setItem("auth_user",JSON.stringify(a)),e({user:a})}).catch(()=>{})}else e({isLoading:!1})}catch(t){console.error("Failed to initialize auth:",t),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),e({isLoading:!1})}},login:async(t,a)=>{try{let n=await d.login({email:t,password:a});localStorage.setItem("auth_token",n.access_token),localStorage.setItem("auth_user",JSON.stringify(n.user)),e({user:n.user,token:n.access_token,isAuthenticated:!0,isLoading:!1})}catch(t){throw e({isLoading:!1}),t}},logout:()=>{d.logout().catch(console.error),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),e({user:null,token:null,isAuthenticated:!1,isLoading:!1})},updateUser:t=>{e(e=>{if(!e.user)return e;let a={...e.user,...t};return localStorage.setItem("auth_user",JSON.stringify(a)),{user:a}})}}));function m(e){let{children:t}=e,a=h(e=>e.initialize);return(0,i.useEffect)(()=>{a()},[a]),(0,n.jsx)(n.Fragment,{children:t})}var p=a(7595);function v(){return!function(){let e=h(e=>e.user),{setLocale:t}=(0,p.Q)();(0,i.useEffect)(()=>{(null==e?void 0:e.language)&&["en","ko","ja"].includes(e.language)&&t(e.language)},[null==e?void 0:e.language,t])}(),null}function f(e){let{children:t,initialLocale:a}=e,[u]=(0,i.useState)(()=>new r.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return(0,n.jsx)(o.aH,{client:u,children:(0,n.jsx)(p.i,{initialLocale:a,children:(0,n.jsxs)(m,{children:[(0,n.jsx)(v,{}),t,(0,n.jsx)(l.x7,{position:"top-right",richColors:!0}),(0,n.jsx)(s.t,{initialIsOpen:!1})]})})})}},7595:function(e,t,a){"use strict";a.d(t,{Q:function(){return l},i:function(){return i}});var n=a(984),r=a(208);let o=(0,r.createContext)(void 0),s=["en","ko","ja"];function i(e){let{children:t,initialLocale:a}=e,[i,l]=(0,r.useState)(a||"en"),u=(0,r.useCallback)(e=>{l(e),function(e){let t=new Date;t.setDate(t.getDate()+30),document.cookie="rdt_lang=".concat(e,";expires=").concat(t.toUTCString(),";path=/;SameSite=Lax")}(e),document.documentElement.lang=e},[]);return(0,r.useEffect)(()=>{document.documentElement.lang=i;let e=function(){try{let e=localStorage.getItem("auth_user");if(e){let t=JSON.parse(e);if(t.language&&s.includes(t.language))return t.language}}catch(e){}let e=document.cookie.match(/(?:^|;\s*)rdt_lang=(en|ko|ja)/);if(e)return e[1];let t=navigator.language.toLowerCase();return t.startsWith("ko")?"ko":t.startsWith("ja")?"ja":"en"}();e!==i&&u(e)},[]),(0,n.jsx)(o.Provider,{value:{locale:i,setLocale:u},children:t})}function l(){let e=(0,r.useContext)(o);if(!e)throw Error("useLanguageContext must be used within LanguageProvider");return e}},7732:function(){}},function(e){e.O(0,[437,115,69,744],function(){return e(e.s=232)}),_N_E=e.O()}]);